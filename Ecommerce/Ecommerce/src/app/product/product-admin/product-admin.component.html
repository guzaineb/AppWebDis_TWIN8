<div class="container mt-5">
  <h2 class="mb-4">Products Management</h2>
  <app-add-category></app-add-category>
  <div class="table-responsive">
    <table class="table table-hover table-striped">
      <thead class="table-dark">
        <tr>
          <th scope="col">Images</th>
          <th scope="col">Name</th>
          <th scope="col">Description</th>
          <th scope="col">Price</th>
          <th scope="col">Stock</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let produit of produits">
          <td>
            <div id="carousel-{{produit.id}}" class="carousel slide" style="width: 120px">
              <div class="carousel-inner">
                <div class="carousel-item" *ngFor="let url of produit.images; let i = index" [ngClass]="{ 'active': i === 0 }">
                  <img [src]="produit.images" class="d-block w-100" alt="Product Image" style="border-radius: 4px">
                </div>
              </div>
            </div>
          </td>
          <td class="align-middle">{{ produit.nom }}</td>
          <td class="align-middle">{{ produit.description }}</td>
          <td class="align-middle">{{ produit.prix }}</td>
          <td class="align-middle">{{ produit.quantiteDisponible }}</td>
          <td class="align-middle">{{ produit.category?.name }}</td>
          <td class="align-middle">
            <div class="d-flex gap-2">
              <button class="btn btn-sm btn-outline-warning" 
                      *ngIf="produit.id" 
                      (click)="editProduit(produit.id)"
                      title="Edit">
                <i class="bi bi-pencil-square"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger" 
                      *ngIf="produit.id" 
                      (click)="deleteProduit(produit.id)"
                      title="Delete">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>